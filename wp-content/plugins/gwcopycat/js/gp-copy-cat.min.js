!function(L){function C(e,t,i){var r=L("#gform_"+e),n=L.makeArray(r.prop("elements")),a="^[a-z]*_"+e+"_"+t;i&&(a+="_"+i),a+="$";for(var o=new RegExp(a,"gi"),s=null,l=0;l<n.length;l++){var c=n[l].id;if(c)if(o.test(c)){s=n[l];break}}return!!s&&(/^(?:checkbox|radio)$/i.test(s.type)?s.checked:!!s.value)}String.prototype.gformFormat||(String.prototype.gformFormat=function(){var i=arguments;return this.replace(/{(\d+)}/g,function(e,t){return void 0!==i[t]?i[t]:e})}),window.gwCopyObj=function(e){var x=this;for(prop in e)e.hasOwnProperty(prop)&&(x[prop]=e[prop]);function b(e){return parseInt(e)!=e}function g(e){if(!(e instanceof Object))return e;var t=[];for(var i in e)e.hasOwnProperty(i)&&t.push(e[i]);return t}x.init=function(){gform.addFilter("gpcc_copied_value",function(e,t,i){if(L("#input_{0}_{1}".gformFormat(x.formId,i.source)).hasClass("ginput_total")||t.hasClass("ginput_quantity")){var r=gf_get_field_number_format(i.source,x.formId);r||(r=gf_get_field_number_format(i.target,x.formId));var n=gformGetDecimalSeparator(r);e=gformCleanNumber(e,"","",n)}return e});var e=L("#gform_wrapper_{0}".gformFormat(x.formId));e.off("click.gpcopycat"),e.on("click.gpcopycat",'.gwcopy input[type="checkbox"]',function(){L(this).is(":checked")?x.copyValues(this):x.clearValues(this)}),e.off("change.gpcopycat"),e.on("change.gpcopycat",".gwcopy input:not(:checkbox), .gwcopy textarea, .gwcopy select",function(){x.copyValues(this)}),e.find(".gwcopy:not(.gfield--type-list)").find("input, textarea, select, button").each(function(){if(L(this).is(":checkbox, :radio")||L(this).parents(".gfield_chainedselect").length?L(this).is(":checked")&&x.copyValues(this,x.overwriteOnInit):x.copyValues(this,x.overwriteOnInit),L(this).is("button")){if(!L(this)[0].id.includes("_select_all"))return;var r=L(this).attr("data-label-select"),e=L(this).attr("data-label-deselect");L(this)[0].onclick=null,L(this).on("click",function(){var i=L(this).text();L(this).siblings().each(function(e,t){i==r?L(t).find("input").prop("checked")||L(t).find("input").click():L(t).find("input").prop("checked")&&L(t).find("input").click()}),i==r?L(this).text(e):L(this).text(r)})}}),e.find(".gfield--type-list.gwcopy").find("input").first().each(function(){x.copyValues(this,x.overwriteOnInit)}),gform.addAction("gform_list_post_item_delete",function(e){0<e.parents(".gwcopy").length&&(x.clearValues(e),x.copyValues(e))});var s=[];L(document).on("gform_post_conditional_logic",function(e,a,t,o){Array.isArray(t)&&(t.forEach(function(e){var t=x.getFieldSettings(e);if(t)for(var i=0;i<t.length;i++)if(-1===L.inArray(t[i].trigger,s)){s.push(t[i].trigger);var r=L("#field_{0}_{1}".gformFormat(a,t[i].trigger)).find("input, textarea, select");if("hidden"!=r.parents(".gfield").attr("data-conditional-logic")){var n=!o;r.is(":checkbox")?r.filter(":checked").length&&x.copyValues(r[0],n,!1):x.copyValues(r[0],n,!1)}}}),s=[])}),e.data("GPCopyCat",x)},x.getFieldSettings=function(e){return void 0!==x.fields[e]?x.fields[e]:!1!==x.getSourceFieldIdByTarget(e,!0)?x.getSourceFieldIdByTarget(e,!0):!1!==x.getSourceField(e,!0)?x.getSourceField(e,!0):[]},x.copyValues=function(h,_,v){var e=gf_get_input_id_by_html_id(L(h).parents(".gfield").attr("id")),t=x.getFieldSettings(e);isOverwriteOrig=void 0!==_?_:x.overwrite;for(var i=0,r=t.length;i<r;i++){var m=t[i],y=m.source,F=m.target,n=m.condition,a=m.conditionFormId,o=x.getFieldGroup(m,"source"),I=x.getFieldGroup(m,"target"),w=x.isListField(o)&&x.isListField(I),k=x.getGroupValues(o,"source",{sort:!(w||!x.isListField(I))&&x.getGroupValues(I,"target",{isListToList:w,sourceInputId:F}),isListToList:w,sourceInputId:y,targetInputId:F});if(_=gform.applyFilters("gpcc_is_overwrite",isOverwriteOrig,h,m,I,o,k),v=void 0!==v?v:_,n){var s=n.split(".");if(!C(a,e=s[0],s[1]))continue}if(!window.gform.applyFilters("gpcc_custom_copy",!1,h.id,o,I,m.source))if(o.parents(".gfield_chainedselect").length)o.each(function(e,t){if(t.name.split("_").pop()===m.source){var i=I.get(e);i.value=t.value,L(i).trigger("change")}});else{if(x.isListField(I)){var l=0<I.filter(function(){return""!==this.value}).length;if(!_&&l)return;var c=I.parents(".ginput_list").find(".gfield_list_group").length,p=x.isListField(o)?o.parents(".ginput_list").find(".gfield_list_group").length:o.length,d=Math.floor(p-c),u=x.getMaxRowCount(I);if(d<0&&1<c)I.each(function(){var e=g(k);-1===L.inArray(L(this).val(),e)&&1<L(this).parents(".gfield_list").find(".gfield_list_group").length&&gformDeleteListItem(L(this),u)});else if(0<d)for(var f=0;f<d&&!(0<u&&u<c+f+1);f++)gformAddListItem(I[I.length-1],x.getMaxRowCount(I));I=x.getFieldGroup(m,"target")}targetValues=[],!b(F)&&I.is(":checkbox")&&_&&I.prop("checked",!1),I.each(function(e){var t=L(this),i=t.is(":checkbox, :radio"),r=w?x.getListInputIndex(t):e,n=i||k[r]||L.isArray(k)&&k.join(" "),a=!1,o=null;if(targetValues[e]=t.val(),t.is(":radio")&&t.parent().hasClass("image-choices-choice")&&t.parent().removeClass("image-choices-choice-selected"),a=i?I.is(":checked"):t.val(),!_&&a&&(!L(h).is("select")||!t.is("select")))return!0;if(!n&&!v)return!0;if(x.isListField(I))o=b(F)?k[e]:k[r],o=gform.applyFilters("gppc_copied_value",o,t,m,k),o=gform.applyFilters("gpcc_copied_value",o,t,m,k),t.val(o);else if(i)-1!=L.inArray(t.val(),gform.applyFilters("gpcc_copied_value",k,t,m,k))&&(t.prop("checked",!0),t.trigger("change"),t.parents(".gfield_price").length&&gformCalculateTotalPrice(x.formId));else if(1<I.length)o=gform.applyFilters("gppc_copied_value",k[r],t,m,k),o=gform.applyFilters("gpcc_copied_value",o,t,m,k),t.val(o);else if(k=k.filter(function(e,t){return""!=e}),o=gform.applyFilters("gppc_copied_value",x.cleanValueByInputType(k.join(" "),t.attr("type")),t,m,k),o=gform.applyFilters("gpcc_copied_value",o,t,m,k),0<t.parents(".gfield_price:not(.gfield_quantity)").length&&t.is('select, input[type="radio"], input[type="checkbox"]')&&-1===o.indexOf("|"))t.val(t.find('option[value^="'+o+'|"]').attr("value"));else if(t.is("select")&&0===t.find('option[value="'+o+'"]').length&&(o=t.find("option:first").val()),t.val(o),window.tinyMCE){var s=tinyMCE.get(t.attr("id"));s&&s.setContent(o)}if(L(t.parent()[0]).hasClass("iti--separate-dial-code")||L(t.parent()[0]).hasClass("iti--inline-dropdown")){var l,c="gp_advanced_phone_field"+t[0].id.replace("input",""),p="_"+x.formId+"_"+y,d="#field"+p,u="gp_advanced_phone_field"+p;l=void 0!==window[u]?window[u].getFormattedNumber():L(d).find(":input")[0].value,window[c].iti.setNumber(l)}if(L(t[0]).hasClass("has-inline-datepicker")){var f=t[0].id.split("_").pop(),g=x.formId;L("#datepicker_"+g+"_"+f).datepicker("setDate",o)}o?t.addClass("gpcc-populated-input").parents(".gfield").addClass("gpcc-populated"):t.removeClass("gpcc-populated-input").parents(".gfield").removeClass("gpcc-populated")}),I.is(":checkbox, :radio")?(_||I.filter(":checked"),I.keypress()):I.each(function(e){targetValues[e]!=L(this).val()&&L(this).change().trigger("chosen:updated")}),I.trigger("copy.gpcopycat")}}},x.clearValues=function(e){for(var t=L(e).parents(".gfield").attr("id").replace("field_"+x.formId+"_",""),i=x.getFieldSettings(t),r=0;r<i.length;r++){var s=i[r],l=[],c=x.getFieldGroup(s,"target"),n=x.getFieldGroup(s,"source"),a=x.isListField(c)&&x.isListField(n);if(!window.gform.applyFilters("gpcc_custom_clear",!1,e.id,n,c,s.source)&&!a)if(parseInt(s.source)==t&&L(e).is(":checkbox"))x.overwrite&&c.prop("checked",!1),x.copyValues(e,!0,!0);else if(n.each(function(e){l[e]=L(this).val()}),c.each(function(e){var t=L(this),i=t.val(),r=t.is(":checkbox, :radio"),n=t.is(":checkbox"),a=l[e];if(1==c.length&&(a=(l=l.filter(function(e,t){return""!=e})).join(" ")),a=x.cleanValueByInputType(a),a=gform.applyFilters("gppc_copied_value",a,t,s,l),a=gform.applyFilters("gpcc_copied_value",a,t,s,l),n&&t.is(":checked")?t.prop("checked",-1!==L.inArray(i,l)).change():r&&t.is(":checked")?t.prop("checked",!1).change():""!==i&&i==a&&t.val("").change(),L(t.parent()[0]).hasClass("iti--separate-dial-code")){var o=t[0].id.replace("input","");window["gp_advanced_phone_field"+o].iti.setNumber("")}t.removeClass("gpcc-populated-input").parents(".gfield").removeClass("gpcc-populated")}),x.isListField(c)){var o=x.getMaxRowCount(c);c.parents(".ginput_list").find(".gfield_list_group:not(:first)").each(function(){0===L(this).find('.gfield_list_cell input[value!=""]').length&&gformDeleteListItem(L(this).find("input").eq(0),o)})}}},x.cleanValueByInputType=function(e,t){if("number"==t){var i=gf_global.gf_currency_config;e=gformCleanNumber(e,i.symbol_right,i.symbol_left,i.decimal_separator)}return e},x.getFieldGroup=function(e,t){var i=e[t],r=parseInt(i),n=e[t+"FormId"],a=L("#field_"+n+"_"+r),o=a.find('input[name^="input"]:not( :button ), select[name^="input"], textarea[name^="input"]'),s=x.isListField(o);if("target"===t){var l=a.find(":input:first");if(gformIsHidden(l)&&"hidden"!==l.prop("type"))return L()}if(s&&(o=o.filter('[name="input_{0}[]"]'.gformFormat(r))),b(i)&&!s){var c=i.split(".")[1],p=o.filter('[id^="input_'+n+"_"+r+"_"+c+'"], input[name="input_'+i+'"]');o=p.length<=0?o.filter("#input_"+n+"_"+i):p}else b(i)&&s&&(o=o.filter(function(){var e=x.getListInputIndex(L(this));return e==x.getListInputIndex(i,e)}));return"source"==t&&1<o.length&&L(o[0]).closest(".ginput_container_password").length&&(o=o.filter("#input_"+n+"_"+i)),"source"==t&&o.is("input:radio, input:checkbox")&&(o=o.filter(":checked")),"source"==t&&o.is("select")&&o.attr("multiple")&&(o=o.find(":selected")),gform.applyFilters("gpcc_field_group",o,e,t,a)},x.getGroupValues=function(e,t,i){void 0===i&&(i={}),i=function(e,t){for(key in t)t.hasOwnProperty(key)&&void 0===e[key]&&(e[key]=t[key]);return e}(i,{sort:!1,isListToList:!1,sourceInputId:!1,targetInputId:!1});var r=[];if(e.each(function(e){var t=e;i.isListToList&&!b(i.targetInputId)&&(t=x.getListInputIndex(L(this))),r[t]=L(this).val()}),!1!==i.sort){for(var n=i.sort.filter(function(e,t){return i.sort.indexOf(e)==t&&""!=e}),a=[],o=0;o<n.length;o++){var s=r.indexOf(n[o]);-1!==s&&(a.push(r[s]),r.splice(s,1))}r=a.concat(r)}return r},x.isListField=function(e){if(void 0!==e.data("isListField"))return e.data("isListField");var t=0<e.parents(".ginput_list").length;return e.data("isListField",t),t},x.getSourceFieldIdByTarget=function(e,t){for(var i in x.fields)if(x.fields.hasOwnProperty(i))for(var r=x.fields[i],n=0;n<r.length;n++){var a=r[n];if(parseInt(a.target)===parseInt(e))return t?r:a.source}return!1},x.getSourceField=function(e,t){for(var i in x.fields)if(x.fields.hasOwnProperty(i))for(var r=x.fields[i],n=0;n<r.length;n++){var a=r[n];if(parseInt(a.source)===parseInt(e))return t?r:a.source}return!1},x.getListInputIndex=function(e,t,i){if(void 0===t?i=!1:"boolean"==typeof t?(i=t,t=!1):void 0===i&&(i=!1),"object"==typeof e)var r=e.attr("name").match(/(\d+)/)[0],n=e.parents(".gfield_list_group"),a=n.find('[name="input_{0}[]"]'.gformFormat(r)),o=e.parents(".gfield_list_container").find(".gfield_list_group"),s=a.index(e)+1,l=o.index(n)+1;else{var c=e.split("."),p=t?t.split("."):[1,1];s=c[1],l=c[2]?c[2]:p[1]}var d=s+"."+l;return i?{index:d,column:s,row:l}:d},x.getMaxRowCount=function(e){for(var t=e.parents(".gfield").attr("class").split(" "),i=0;i<t.length;i++)if(-1!==t[i].indexOf("gp-field-maxrows"))return parseInt(t[i].split("-")[3]);return 0},x.init()}}(jQuery);
//# sourceMappingURL=gp-copy-cat.js.map